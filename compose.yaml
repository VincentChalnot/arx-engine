services:
  frontend:
    image: joseluisq/static-web-server:2
    ports:
      - "8080:80"
    volumes:
      - ./public:/public:ro
    depends_on:
      - backend

  backend:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    environment:
      - RUST_LOG=info
      - XDG_RUNTIME_DIR=/tmp/runtime
      # Uncomment to force specific GPU backend:
      # - WGPU_BACKEND=VULKAN
    # GPU access configuration for AMD/Intel GPUs
    devices:
      - /dev/dri:/dev/dri
    group_add:
      - video
